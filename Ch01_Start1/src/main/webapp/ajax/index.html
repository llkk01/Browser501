<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JSP::AJAX::DB</title>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<script>
	$(function() {
		$("#id01").on("click", function() {
			alert("데이터 요청!");
			$.ajax({
				url: "dbfrom.jsp?",
				type: "get",
				success: function(t) {
					$(t).find("person").each(function() { //dbfrom.jsp 안의 "person"을 찾아서 반복문장을 실행하는 함수
						var name = $(this).find("name").text();
						var age = $(this).find("age").text();
						var salary = $(this).find("salary").text();
						
						$("<h1></h1>").text(name +" " +age +" " +salary).appendTo("body"); //appendTo > 자식요소에 붙이는 것
					});
							
				},
				error: function() {
					alert("실패!");
				}
			});
		});
		
		$("#id02").on("click", function() {
			alert("데이터 전송!");
			$.ajax({
				url: "dbto.jsp",
				type: "post",
				data:{
					name: $("#name1").val(),
					age: $("#age1").val(),
					salary: $("#salary1").val()					
				},
				success: function() {
					alert("성공!");
				},
				error: function() {
					alert("실패!");
				}
				
			});
		});
		
	});
</script>

</head>
<body>
<button id = "id01">데이터 요청(Select_dbfrom)</button><br><br>
이름 : <input type = "text" name = "name" id = "name1"><br>
나이 : <input type = "text" name = "age" id = "age1"><br>
금액 : <input type = "text" name = "salary" id = "salary1"><br><br>
<button id = "id02">DB 전송(Insert_dbto)</button><br><br>
</body>
</html>