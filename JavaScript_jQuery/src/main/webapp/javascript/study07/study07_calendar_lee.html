<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>2021년 달력</title>

<!-- 셀합치기  -->
<!-- - Colspan : 열 합치기  -->
<!-- - Rowspan : 행 합치기  -->

<style>

/* # fontmb : 0000년 00월의 행의 글자색 지정*/
#fontmb {
	color: midnightblue;
	font-size: 3;
}

/* thcolspan의 0000년 00월의 행의 배경색 지정 */
#thcolspan {
	background-color: #F0F0F0;
	column-width: 400;
}

#tr_t1 {
	text-align: center;
	vertical-align: center;
}

/* 일자 tr에 대한 style */
#tr_t2 {
	text-align: right;
	vertical-align: top;
	background-color: #FFEFEE;
}
</style>

</head>
<body>

	<script>
	//시간을 읽어와서 오전,오후로 브라우저에 보여줄 수 있게 해주는 function 함수 생성
	function get_Time(){ 
		var now = new Date(); //Date객체 생성
		var hour = now.getHours(); //객체를 통해 시간 알 수 있도록 변수선언
		var minute = now.getMinutes(); //객체를 통해 분을 알 수 있도록 변수선언
		var ampm; // 오전/오후
		
		// 오전,오후를 나누기위한 if문
		if(hour >=12) {
			hour -= 12;
			ampm = "오후" +"<br>";
		}else {
			ampm = "오전" +"<br>";
		}
		// 삼항 연산자
		hour = (hour == 0)? 12 : hour;
		
		if(minute < 10){
			minute = "0" + minute; //분이 10분 이전인 경우 0을 붙여서 출력(예 - 9 > 09)
		}
		return ampm + hour +" : " + minute; //현재 시간 표시
	}
	
	//년과 달을 받아서 마지막 일 구하기
	function get_Day(year,month) {
		var Last_Mon = new Array(31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31) //달에 대한 배열 생성
		var Mon2;
		
		// 2월 윤년을 구하기 위한 if문
		if(year%4 == 0)
			Mon2 = true;
		else 
			Mon2 = false;
		
		Last_Mon[1] = (Mon2)? 29 : 28
		
		return Last_Mon[month]; //마지막날 반환
	}
	
	var digit = 1; // DAY일자에 대한 변수생성
	var curCell = 1; //cell셀에 대한 변수생성
	
	// table을 이용해서 달력만들기 - 7행7열 (요일,마지막날,현재날짜,년도,달) 2,30,26,2021,10
	function drawCal(firstDay,lastDate,date,year,monthName){
		var text = ""; //해당되는 값을 써주기 위한 text변수 생성
		text += "<center><table><th id = 'thcolspan', colspan = 7>"; //1번행 0000년 0월에 대한 style
		text += "<font id = 'fontmb'>";
		text += year + "년" + (monthName + 1) + "월";
		text += "</font></th>"; //0000년 00월 (첫번째 행 꾸미기 종료)
		
		// 2번째 행에 대한 내용 만들어주기 
		var weekDay = new Array("일", "월", "화", "수", "목", "금", "토"); // 요일에 대한 배열생성
			
			text += "<tr id = 'tr_t1'>";
			
			var openCol = "<td bgcolor=#FFEFFF width=45 height=40>"; //2번행 요일 td에 대한 style
			openCol += "<font color=darkblue>";
			var closeCol = "</font></tg>";
			
			for(var dayNum=0; dayNum<=6; dayNum++){
				text += openCol +weekDay[dayNum] +closeCol;
			}
			text += "</tr>";
			
			// 달렬표 만들기(일자)
			for(var row=1; row<=Math.ceil((lastDate+firstDay-1)/7); row++){ //행에 대한 내용을 의미
				text += "<tr id = 'tr_t2'>"; //일자 tr에 대한 style
				
				//중첩for문 활용
				for(var col=1; col<=7; col++){ //시작일 ~ 말일
					if(digit > lastDate) //digit가 말일보다 크면  
					break; //digit가 달의 마지막 수행 후 31이 되면 for 문장을 빠져나온다.
					
					if(curCell < firstDay) {//현재셀이 시작하는 달보다 작으면
						text += "<td> &nbsp </td>"//셀의 칸을 비워둔다.
						curCell++; //다음셀칸으로 이동
					}else {
						if(digit == date){ //digit의 날짜랑 오늘날짜 일치하면
							text += "<td height=40>";
							text += "<font color=red>";
							text += digit;
							text += "</font><br>";
							
							text += "<font color=purple size=2>";
							text += "<center>" +get_Time() +"</center>"; //현재 시간 호출
							text += "</font>";
							text += "</td>";

						}else{
							text += "<td height=40>" +digit +"</td>";
						}
						digit++;
					}
					
				}	
				text += "</tr>";
				
			}
			text += "</table>";	
			text += "</center>";	
			
			return text;
	}

</script>

	<script>
	var now = new Date(); //Date객체생성
	var year = now.getYear()+1900; 	//getYear값 = 121 > 121+1900 = 2021 (년)
	var month = now.getMonth(); //(월)
	var date = now.getDate();  //(일)
	
	var firstDayInstance = new Date(year,month,1);
	var firstDay = firstDayInstance.getDay()+1; //요일을 계산(월요일=2,화요일=3,....)
	
	console.log("firstDay : " +firstDay);
	var days = get_Day(year,month); //달의 마지막일 구하는 내용
	
	var my_text = drawCal(firstDay,days,date,year,month); //drawCal호출 2,30,26,2021,10
	document.write(my_text);
	
</script>

</body>
</html>

